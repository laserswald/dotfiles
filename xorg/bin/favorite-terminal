#!/bin/sh
# favorite-terminal [-c WINDOW_CLASS] [COMMAND]
#
# Abstract away differences between terminals for launching programs

TERMS="foot ghostty alacritty kitty xst st xterm"

# TERM="alacritty"
# TERM="xst"

WINDOW_CLASS=

while getopts 'c:' arg; do
    case $arg in
	c)
	    WINDOW_CLASS=$OPTARG
	    ;;
	*) 
	    echo "Unknown option"
            exit 1
            ;; 
    esac
done
shift $((OPTIND-1))

COMMAND=$@

# Build the command line

for term in $TERMS
do
    if command -v "$term"
    then
	TERMINAL_CMD=$term
	break
    fi
done

# Install window class
if [ "$WINDOW_CLASS" ]
then
    TERMINAL_CMD="$TERMINAL_CMD --class $WINDOW_CLASS"
fi

# Install command
if [ "$COMMAND" ]
then
    TERMINAL_CMD="$TERMINAL_CMD --command $COMMAND"
fi

# Execute it
exec $TERMINAL_CMD
